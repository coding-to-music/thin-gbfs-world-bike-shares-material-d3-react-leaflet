<!DOCTYPE html>
<html>
<head>
    <title>fast-gbfs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="/dist/bundle.css"/>
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
    integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
    crossorigin=""></script>

</head>
<div id="map" style="width:100%;height:100%"></div>
<script>
    var map = L.map('map').setZoom(15);
    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
        maxZoom: 16
    }).addTo(map);
    
    $.get("/systems", function(response) {
        for(var i=1; i < response.length; i++){
            var station = response[i];
            var marker = L.circleMarker([station[2], station[3]], {
                radius: 3,
                weight: 0,
                fillColor: "rgb(253,77,2)",
                fillOpacity: 1.0
            });
            marker.bindPopup('<a href="/#'+station[0]+'" target="blank">'+station[1]+'</a>');
            marker.addTo(map);
        }
        map.setView([41,-95], 4);
    });
</script>
</body>
</html>