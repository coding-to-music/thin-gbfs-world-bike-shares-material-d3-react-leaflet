<!DOCTYPE html>
<html>
<head>
    <title>thin-gbfs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <style>
        body {
            padding: 0;
            margin: 0;
        }
        html, body, #map {
            height: 100%;
            width: 100%;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
      integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
      crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
      integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
      crossorigin=""></script>
</head>
<div id="map"></div>
<script>
    var map = L.map('map').setZoom(15);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OSM</a>, &copy; <a href="https://carto.com/attribution">CARTO</a>'
    }).addTo(map);
    
    $.get("/systems", function(response) {
        for(var i=1; i < response.length; i++){
            var station = response[i];
            var marker = L.circleMarker([station[2], station[3]], {
                radius: 8,
                weight: 0,
                fillColor: "rgb(253,77,2)",
                fillOpacity: 1.0
            });
            marker.bindPopup('<a href="/#'+station[0]+'" target="blank">'+station[1]+'</a>');
            marker.addTo(map);
        }
        map.setView([41,-95], 4);
    });
</script>
</body>
</html>